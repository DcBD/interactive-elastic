(function(t,s){typeof exports=="object"&&typeof module<"u"?s(exports,require("aws4fetch")):typeof define=="function"&&define.amd?define(["exports","aws4fetch"],s):(t=typeof globalThis<"u"?globalThis:t||self,s(t["interactive-elastic-core"]={},t.aws4fetch))})(this,function(t,s){"use strict";var w=Object.defineProperty;var y=(t,s,a)=>s in t?w(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var i=(t,s,a)=>(y(t,typeof s!="symbol"?s+"":s,a),a);class a{constructor(e,n){i(this,"username");i(this,"password");this.username=e,this.password=n}async getAuthorizationHeader(){return{Authorization:"Basic "+btoa(this.username+":"+this.password)}}}class u{constructor(e){i(this,"credentials");this.credentials=e}async getAuthorizationHeader(e){const n=new s.AwsV4Signer({...this.credentials,headers:{"Content-Type":"application/x-ldjson"},url:e.url,body:e.body}),{headers:r}=await n.sign();return r}}class d{constructor({endpoint:e,authorization:n}){i(this,"endpoint");i(this,"authorization");switch(this.endpoint=e,n.type){case"basic":const{username:r,password:c}=n;this.authorization=new a(r,c);break;case"awsSigned":const{credentials:h}=n;this.authorization=new u(h);break}}async makeRequest(e,n={},r,c="POST"){return await(await fetch(this.endpoint+e,{method:c,headers:{...await this.authorization.getAuthorizationHeader(),...n},body:r})).json()}}class p{constructor({apiOptions:e}){i(this,"api");this.api=new d(e)}async get({path:e}){return this.api.makeRequest(e,{},null,"GET")}async post({path:e,body:n}){return this.api.makeRequest(e,{"Content-Type":"application/json"},n,"POST")}async search({index:e,body:n}){return this.post({path:`/${e}/_search`,body:n})}}class l extends p{async getClusterHealth(){return this.get({path:"/_cluster/health"})}}t.ReadOnlyClient=l,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
